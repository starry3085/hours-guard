name: Deploy to Cloudflare Pages

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

display-name: "éƒ¨ç½²åˆ°Cloudflare Pages"

steps:
- name: æ£€å‡ºä»£ç 
  uses: git-checkout
  
- name: å®‰è£…Node.js
  uses: node-setup
  with:
    version: '18'
    
- name: å®‰è£…Wrangler CLI
  run: |
    npm install -g wrangler
    
- name: éƒ¨ç½²åˆ°Cloudflare Pages
  env:
    CLOUDFLARE_API_TOKEN: ${{ secrets.CLOUDFLARE_API_TOKEN }}
    CLOUDFLARE_ACCOUNT_ID: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}
  run: |
    echo "ğŸš€ å¼€å§‹éƒ¨ç½²åˆ°Cloudflare Pages..."
    echo "é¡¹ç›®: hours-guard"
    echo "æäº¤: ${{ GITEE_COMMIT_SHA }}"
    wrangler pages deploy public --project-name=hours-guard --commit-message="Giteeè‡ªåŠ¨éƒ¨ç½²: ${GITEE_COMMIT_SHA:0:7}"