<!-- debug.wxml -->
<view class="container safe-area-bottom" style="padding-bottom: {{adaptedStyles.pageBottomPadding}};">
  <view class="header">
    <text class="title" style="font-size: {{adaptedStyles.titleFontSize}};">调试工具</text>
  </view>
  
  <!-- 系统适配信息 -->
  <view class="section" style="margin: {{adaptedStyles.cardMargin}}; padding: {{adaptedStyles.cardPadding}};">
    <view class="section-title" style="font-size: {{adaptedStyles.contentFontSize}};">系统适配信息</view>
    <view wx:if="{{adaptationInfo.device}}" class="adaptation-info">
      <view class="info-item">
        <text style="font-size: {{adaptedStyles.contentFontSize}};">设备: {{adaptationInfo.device.brand}} {{adaptationInfo.device.model}}</text>
      </view>
      <view class="info-item">
        <text style="font-size: {{adaptedStyles.contentFontSize}};">系统: {{adaptationInfo.device.system}}</text>
      </view>
      <view class="info-item">
        <text style="font-size: {{adaptedStyles.contentFontSize}};">屏幕: {{adaptationInfo.screen.windowSize}}</text>
      </view>
      <view class="info-item">
        <text style="font-size: {{adaptedStyles.contentFontSize}};">类型: {{adaptationInfo.screen.screenType}}</text>
      </view>
      <view class="info-item">
        <text style="font-size: {{adaptedStyles.contentFontSize}};">iPhone X: {{adaptationInfo.adaptation.isIPhoneX ? '是' : '否'}}</text>
      </view>
    </view>
    <view class="button-group">
      <button bindtap="showAdaptationInfo" type="primary" size="mini" style="height: {{adaptedStyles.buttonHeight}}; font-size: {{adaptedStyles.buttonFontSize}};">详细信息</button>
      <button bindtap="testAdaptation" type="primary" size="mini" style="height: {{adaptedStyles.buttonHeight}}; font-size: {{adaptedStyles.buttonFontSize}};">测试适配</button>
      <button bindtap="runPerformanceTest" type="default" size="mini" style="height: {{adaptedStyles.buttonHeight}}; font-size: {{adaptedStyles.buttonFontSize}};">性能测试</button>
      <button bindtap="exportAdaptationInfo" type="default" size="mini" style="height: {{adaptedStyles.buttonHeight}}; font-size: {{adaptedStyles.buttonFontSize}};">导出信息</button>
    </view>
  </view>
  
  <view class="section" style="margin: {{adaptedStyles.cardMargin}}; padding: {{adaptedStyles.cardPadding}};">
    <view class="section-title" style="font-size: {{adaptedStyles.contentFontSize}};">存储信息</view>
    <view class="info-item">
      <text style="font-size: {{adaptedStyles.contentFontSize}};">记录总数: {{storageInfo.recordCount ? storageInfo.recordCount : 0}}</text>
    </view>
    <view class="info-item">
      <text style="font-size: {{adaptedStyles.contentFontSize}};">存储使用: {{storageInfo.usagePercent ? storageInfo.usagePercent : 0}}%</text>
    </view>
    <view class="info-item">
      <text style="font-size: {{adaptedStyles.contentFontSize}};">调试信息: {{debugInfo}}</text>
    </view>
  </view>
  
  <view class="section" style="margin: {{adaptedStyles.cardMargin}}; padding: {{adaptedStyles.cardPadding}};">
    <view class="section-title" style="font-size: {{adaptedStyles.contentFontSize}};">操作</view>
    <view class="button-group">
      <button bindtap="clearCache" type="primary" size="mini" style="height: {{adaptedStyles.buttonHeight}}; font-size: {{adaptedStyles.buttonFontSize}};">清除缓存</button>
      <button bindtap="optimizeStorage" type="primary" size="mini" style="height: {{adaptedStyles.buttonHeight}}; font-size: {{adaptedStyles.buttonFontSize}};">优化存储</button>
      <button bindtap="forceReload" type="warn" size="mini" style="height: {{adaptedStyles.buttonHeight}}; font-size: {{adaptedStyles.buttonFontSize}};">强制刷新</button>
    </view>
  </view>
  
  <view class="section" style="margin: {{adaptedStyles.cardMargin}}; padding: {{adaptedStyles.cardPadding}};">
    <view class="section-title" style="font-size: {{adaptedStyles.contentFontSize}};">记录数据 ({{records.length}})</view>
    <scroll-view scroll-y class="records-container">
      <block wx:for="{{records}}" wx:key="date">
        <view class="record-item" style="height: {{adaptedStyles.listItemHeight}};">
          <text class="record-date" style="font-size: {{adaptedStyles.contentFontSize}};">{{item.date}}</text>
          <view class="record-times">
            <text wx:if="{{item.on}}" style="font-size: {{adaptedStyles.contentFontSize}};">上班: {{item.on}}</text>
            <text wx:if="{{item.off}}" style="font-size: {{adaptedStyles.contentFontSize}};">下班: {{item.off}}</text>
          </view>
        </view>
      </block>
      <view wx:if="{{records.length === 0}}" class="empty-tip">
        <text style="font-size: {{adaptedStyles.contentFontSize}};">暂无记录数据</text>
      </view>
    </scroll-view>
  </view>
</view>