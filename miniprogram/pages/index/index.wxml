<view class="page-container">
  <!-- 页面标题 -->
  <view class="header">
    <text class="title">{{isToday ? '今日打卡' : '补录打卡'}}</text>
    <text class="subtitle">{{isToday ? '' : '补录历史记录'}}</text>
  </view>

  <!-- 日期和时间显示 -->
  <view class="datetime-section">
    <view class="date-time-wrapper">
      <picker 
        mode="date" 
        value="{{selectedDate}}"
        start="2020-01-01"
        end="2030-12-31"
        bindchange="onDateChange"
        class="date-picker">
        <view class="date-display">
          <text class="date-text">{{selectedDate}}</text>
        </view>
      </picker>
      <text class="time-value" wx:if="{{isToday}}">{{currentTime}}</text>
    </view>
  </view>

  <!-- 打卡记录卡片 -->
  <view class="record-card">
    <view class="card-header">
      <!-- Removed redundant title and date display -->
    </view>
    
    <view class="record-list">
      <view class="record-item">
        <view class="record-row">
          <text class="record-label">上班时间</text>
          <text class="record-time">
            {{todayRecord.on || '--:--'}}
          </text>
        </view>
      </view>
      
      <view class="record-item">
        <view class="record-row">
          <text class="record-label">下班时间</text>
          <text class="record-time">
            {{todayRecord.off || '--:--'}}
          </text>
        </view>
      </view>
    </view>
  </view>

  <!-- 打卡按钮组 -->
  <view class="action-section">
    <button class="punch-btn punch-in {{todayRecord.on ? 'disabled' : ''}}" 
            bindtap="checkIn" 
            disabled="{{!!todayRecord.on}}"
            hover-class="btn-hover">
      <view class="btn-content">
        <text class="btn-text">{{isToday ? '上班打卡' : '补录上班'}}</text>
        <text class="btn-status-text" wx:if="{{todayRecord.on}}">已打卡</text>
      </view>
    </button>
    
    <!-- 下班打卡按钮 - 使用view而不是button -->
    <block wx:if="{{!todayRecord.off && todayRecord.on}}">
      <view class="custom-btn custom-btn-out" bindtap="checkOut">
        <text>{{isToday ? '下班打卡' : '补录下班'}}</text>
      </view>
    </block>
    <block wx:else>
      <view class="custom-btn custom-btn-disabled">
        <text>{{isToday ? '下班打卡' : '补录下班'}}</text>
        <text class="custom-btn-hint" wx:if="{{todayRecord.off}}">已打卡</text>
        <text class="custom-btn-hint" wx:elif="{{!todayRecord.on}}">需先上班打卡</text>
      </view>
    </block>
  </view>

  <!-- 提示信息 -->
  <view class="tips-section">
    <view class="tip-item">
      <text class="tip-text">所有数据仅保存在本机，请定期导出备份</text>
    </view>
    <view class="tip-item" wx:if="{{!isToday}}">
      <text class="tip-text">补录模式：可以修改历史日期的打卡记录</text>
    </view>
  </view>
</view>
