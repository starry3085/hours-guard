<view class="page-container">
  <!-- 页面标题 -->
  <view class="header">
    <text class="title">{{isToday ? '今日打卡' : '补录打卡'}}</text>
  </view>

  <!-- 日期和时间显示 -->
  <view class="datetime-section">
    <view class="date-time-wrapper">
      <picker 
        mode="date" 
        value="{{selectedDate}}"
        start="2020-01-01"
        end="2030-12-31"
        bindchange="onDateChange"
        class="date-picker">
        <view class="date-display">
          <view class="date-icon">
            <view class="calendar-icon"></view>
          </view>
          <text class="date-text">{{selectedDate}}</text>
        </view>
      </picker>
      <view class="time-container" wx:if="{{isToday}}">
        <text class="time-value">{{currentTime}}</text>
        <view class="time-pulse"></view>
      </view>
    </view>
  </view>

  <!-- 打卡记录卡片 -->
  <view class="record-card">
    <view class="record-list">
      <view class="record-item">
        <view class="record-row">
          <view class="record-label-container">
            <view class="record-icon record-icon-in"></view>
            <text class="record-label">上班时间</text>
          </view>
          <text class="record-time">
            {{todayRecord.on ? todayRecord.on : '未打卡'}}
          </text>
        </view>
      </view>
      
      <view class="record-item">
        <view class="record-row">
          <view class="record-label-container">
            <view class="record-icon record-icon-out"></view>
            <text class="record-label">下班时间</text>
          </view>
          <text class="record-time">
            {{todayRecord.off ? todayRecord.off : '未打卡'}}
          </text>
        </view>
      </view>
    </view>
  </view>

  <!-- 打卡按钮组 -->
  <view class="action-section">
    <button class="punch-btn punch-in {{todayRecord.on ? 'disabled' : ''}}" 
            bindtap="checkIn" 
            disabled="{{!!todayRecord.on}}"
            hover-class="btn-hover">
      <view class="btn-content">
        <text class="btn-text">{{isToday ? '上班打卡' : '补录上班'}}</text>
        <text class="btn-status-text" wx:if="{{todayRecord.on}}">已打卡</text>
      </view>
    </button>
    
    <!-- 下班打卡按钮 - 使用view而不是button -->
    <block wx:if="{{!todayRecord.off && todayRecord.on}}">
      <view class="custom-btn custom-btn-out" bindtap="checkOut">
        <text>{{isToday ? '下班打卡' : '补录下班'}}</text>
      </view>
    </block>
    <block wx:else>
      <view class="custom-btn custom-btn-disabled">
        <text>{{isToday ? '下班打卡' : '补录下班'}}</text>
        <text class="custom-btn-hint" wx:if="{{todayRecord.off}}">已打卡</text>
        <text class="custom-btn-hint" wx:elif="{{!todayRecord.on}}">需先上班打卡</text>
      </view>
    </block>
  </view>

  <!-- 提示信息 -->
  <view class="tips-section">
    <view class="tip-item">
      <view class="tip-icon"></view>
      <text class="tip-text bold-tip">所有数据仅保存在本机，请定期导出备份</text>
    </view>
  </view>
  
  <!-- 底部导航栏 -->
  <view class="tab-bar">
    <view class="tab-item tab-active">
      <view class="tab-icon tab-icon-clock"></view>
      <text class="tab-text">打卡</text>
    </view>
    <view class="tab-item">
      <view class="tab-icon tab-icon-stat"></view>
      <text class="tab-text">统计</text>
    </view>
    <view class="tab-item">
      <view class="tab-icon tab-icon-export"></view>
      <text class="tab-text">导出</text>
    </view>
  </view>
</view>
