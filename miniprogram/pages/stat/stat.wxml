<view class="container">
  <view class="header">
    <view class="title">打卡记录</view>
    <view class="month">{{currentMonth}}</view>
  </view>
  
  <view class="empty-tip" wx:if="{{list.length === 0}}">
    <text>本月暂无打卡记录</text>
  </view>
  
  <scroll-view scroll-y class="record-list" wx:else>
    <view class="list-header">
      <text class="date-header">日期</text>
      <text class="time-header">上班</text>
      <text class="time-header">下班</text>
    </view>
    <view wx:for="{{list}}" wx:key="date" class="record-item">
      <text class="date-cell">{{item.date}}</text>
      <text class="time-cell" bindtap="onEditTime" data-type="on" data-date="{{item.date}}">{{item.on || '-'}}</text>
      <text class="time-cell" bindtap="onEditTime" data-type="off" data-date="{{item.date}}">{{item.off || '-'}}</text>
    </view>
  </scroll-view>

  <view wx:if="{{showPicker}}" class="picker-mask">
    <view class="picker-container">
      <view class="picker-header">
        <text bindtap="onPickerCancel">取消</text>
        <text>修改{{pickerType === 'on' ? '上班' : '下班'}}时间</text>
        <text bindtap="onPickerConfirm">确定</text>
      </view>
      <picker 
        mode="multiSelector" 
        range="{{[hours, minutes]}}" 
        value="{{pickerValue}}"
        bindchange="onPickerChange">
        <view class="picker-content">
          <text class="picker-time">{{pickerValue[0]}}:{{pickerValue[1]}}</text>
        </view>
      </picker>
    </view>
  </view>
  
  <view class="summary" wx:if="{{list.length > 0}}">
    <view class="summary-item">
      <view class="stat-container">
        <view class="stat-row">
          <text>本月打卡天数：</text>
          <text>{{monthDays}}</text>
        </view>
        <view class="stat-row">
          <text>本周工作时长：</text>
          <text>{{weekHours}}小时</text>
        </view>
        <view class="stat-row">
          <text>本周平均每日：</text>
          <text>{{avgDailyHours}}小时</text>
        </view>
      </view>
      <text class="highlight">{{list.length}}天</text>
    </view>
  </view>
</view> 