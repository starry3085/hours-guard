<view class="page-container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="header">
    <text class="title">ç»Ÿè®¡åˆ†æ</text>
    <text class="subtitle">{{currentMonth}}</text>
  </view>

  <!-- ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-section" wx:if="{{list.length > 0}}">
    <view class="stats-grid">
      <view class="stat-card">
        <text class="stat-number">{{monthDays}}</text>
        <text class="stat-label">æ‰“å¡å¤©æ•°</text>
      </view>
      <view class="stat-card">
        <text class="stat-number">{{totalMonthHours}}</text>
        <text class="stat-label">æœ¬æœˆæ€»æ—¶é•¿(h)</text>
      </view>
      <view class="stat-card">
        <text class="stat-number">{{weekHours}}</text>
        <text class="stat-label">æœ¬å‘¨æ—¶é•¿(h)</text>
      </view>
      <view class="stat-card">
        <text class="stat-number">{{avgMonthDailyHours}}</text>
        <text class="stat-label">æ—¥å‡æ—¶é•¿(h)</text>
      </view>
    </view>
  </view>

  <!-- è®°å½•åˆ—è¡¨ -->
  <view class="records-section">
    <view class="section-header">
      <text class="section-title">æ‰“å¡è®°å½•</text>
      <text class="record-count" wx:if="{{list.length > 0}}">å…±{{list.length}}æ¡</text>
    </view>

    <view class="empty-state" wx:if="{{list.length === 0}}">
      <text class="empty-icon">ğŸ“Š</text>
      <text class="empty-text">æœ¬æœˆæš‚æ— æ‰“å¡è®°å½•</text>
      <text class="empty-hint">å»æ‰“å¡é¡µé¢è®°å½•æ‚¨çš„å·¥ä½œæ—¶é—´å§</text>
    </view>

    <scroll-view scroll-y class="record-list" wx:else enable-back-to-top>
      <view class="list-header">
        <text class="header-date">æ—¥æœŸ</text>
        <text class="header-time">ä¸Šç­</text>
        <text class="header-time">ä¸‹ç­</text>
        <text class="header-duration">æ—¶é•¿</text>
        <text class="header-action">æ“ä½œ</text>
      </view>
      
      <view wx:for="{{list}}" wx:key="date" class="record-row">
        <view class="cell-date">
          <text class="date-text">{{item.date}}</text>
          <text class="weekday">{{item.weekday || ''}}</text>
        </view>
        
        <view class="cell-time" bindtap="onEditTime" data-type="on" data-date="{{item.date}}">
          <text class="time-text {{item.on ? 'has-time' : 'no-time'}}">{{item.on || '--:--'}}</text>
          <text class="edit-hint" wx:if="{{item.on}}">ç‚¹å‡»ç¼–è¾‘</text>
        </view>
        
        <view class="cell-time" bindtap="onEditTime" data-type="off" data-date="{{item.date}}">
          <text class="time-text {{item.off ? 'has-time' : 'no-time'}}">{{item.off || '--:--'}}</text>
          <text class="edit-hint" wx:if="{{item.off}}">ç‚¹å‡»ç¼–è¾‘</text>
        </view>
        
        <view class="cell-duration">
          <text class="duration-text">{{item.workHoursText}}</text>
        </view>
        
        <view class="cell-action">
          <text class="delete-btn" bindtap="onDeleteRecord" data-date="{{item.date}}">åˆ é™¤</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- æ—¶é—´é€‰æ‹©å™¨å¼¹çª— -->
  <view wx:if="{{showPicker}}" class="picker-overlay">
    <view class="picker-modal">
      <view class="picker-header">
        <text class="picker-cancel" bindtap="onPickerCancel">å–æ¶ˆ</text>
        <text class="picker-title">ä¿®æ”¹{{pickerType === 'on' ? 'ä¸Šç­' : 'ä¸‹ç­'}}æ—¶é—´</text>
        <text class="picker-confirm" bindtap="onPickerConfirm">ç¡®å®š</text>
      </view>
      
      <view class="picker-body">
        <picker-view 
          class="picker-view"
          value="{{pickerValue}}" 
          bindchange="onPickerChange">
          <picker-view-column>
            <view wx:for="{{hours}}" wx:key="*this" class="picker-item">{{item}}</view>
          </picker-view-column>
          <picker-view-column>
            <view wx:for="{{minutes}}" wx:key="*this" class="picker-item">{{item}}</view>
          </picker-view-column>
        </picker-view>
        
        <view class="picker-indicator">
          <text class="time-display">{{hours[pickerValue[0]]}}:{{minutes[pickerValue[1]]}}</text>
        </view>
      </view>
    </view>
  </view>
</view> 